import{t as e,k as t,l as s,n as a,e as n,c as r,p as i,j as o,G as l}from"./index-CS486dXL.js";import{r as c}from"./vendor-DTtRowIX.js";import{l as d}from"./loadRecharts-BTZDNLeK.js";import{u}from"./useAggregates-BGc6SA7C.js";import{a as m}from"./volume-D68Gt7vI.js";import"./charts-Cu4NAUVk.js";let h={};function x(){return h}function g(t,s){var a,n,r,i;const o=x(),l=(null==s?void 0:s.weekStartsOn)??(null==(n=null==(a=null==s?void 0:s.locale)?void 0:a.options)?void 0:n.weekStartsOn)??o.weekStartsOn??(null==(i=null==(r=o.locale)?void 0:r.options)?void 0:i.weekStartsOn)??0,c=e(t),d=c.getDay(),u=(d<l?7:0)+d-l;return c.setDate(c.getDate()-u),c.setHours(0,0,0,0),c}function f(e){return g(e,{weekStartsOn:1})}function p(s){const a=e(s),n=a.getFullYear(),r=t(s,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=f(r),o=t(s,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=f(o);return a.getTime()>=i.getTime()?n+1:a.getTime()>=l.getTime()?n:n-1}function w(t){const s=e(t);return s.setHours(0,0,0,0),s}function b(t){const s=e(t),a=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return a.setUTCFullYear(s.getFullYear()),+t-+a}function v(t){if(!(s=t,s instanceof Date||"object"==typeof s&&"[object Date]"===Object.prototype.toString.call(s)||"number"==typeof t))return!1;var s;const a=e(t);return!isNaN(Number(a))}const j={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function y(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const k={date:y({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:y({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:y({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},N={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function M(e){return(t,s)=>{let a;if("formatting"===((null==s?void 0:s.context)?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,n=(null==s?void 0:s.width)?String(s.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{const t=e.defaultWidth,n=(null==s?void 0:s.width)?String(s.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function S(e){return(t,s={})=>{const a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(n);if(!r)return null;const i=r[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return}(o,e=>e.test(i)):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=s.valueCallback?s.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var W;const T={code:"en-US",formatDistance:(e,t,s)=>{let a;const n=j[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"in "+a:a+" ago":a},formatLong:k,formatRelative:(e,t,s,a)=>N[e],localize:{ordinalNumber:(e,t)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:M({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:M({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:M({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:M({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:M({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(W={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const s=e.match(W.matchPattern);if(!s)return null;const a=s[0],n=e.match(W.parsePattern);if(!n)return null;let r=W.valueCallback?W.valueCallback(n[0]):n[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(a.length)}}),era:S({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:S({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:S({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:S({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:S({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function P(a){const n=e(a),r=function(e,t){const a=w(e),n=w(t),r=+a-b(a),i=+n-b(n);return Math.round((r-i)/s)}(n,function(s){const a=e(s),n=t(s,0);return n.setFullYear(a.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return r+1}function K(s){const n=e(s),r=+f(n)-+function(e){const s=p(e),a=t(e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),f(a)}(n);return Math.round(r/a)+1}function C(s,a){var n,r,i,o;const l=e(s),c=l.getFullYear(),d=x(),u=(null==a?void 0:a.firstWeekContainsDate)??(null==(r=null==(n=null==a?void 0:a.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??d.firstWeekContainsDate??(null==(o=null==(i=d.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)??1,m=t(s,0);m.setFullYear(c+1,0,u),m.setHours(0,0,0,0);const h=g(m,a),f=t(s,0);f.setFullYear(c,0,u),f.setHours(0,0,0,0);const p=g(f,a);return l.getTime()>=h.getTime()?c+1:l.getTime()>=p.getTime()?c:c-1}function A(s,n){const r=e(s),i=+g(r,n)-+function(e,s){var a,n,r,i;const o=x(),l=(null==s?void 0:s.firstWeekContainsDate)??(null==(n=null==(a=null==s?void 0:s.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(i=null==(r=o.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,c=C(e,s),d=t(e,0);return d.setFullYear(c,0,l),d.setHours(0,0,0,0),g(d,s)}(r,n);return Math.round(i/a)+1}function D(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const F={y(e,t){const s=e.getFullYear(),a=s>0?s:1-s;return D("yy"===t?a%100:a,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):D(s+1,2)},d:(e,t)=>D(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>D(e.getHours()%12||12,t.length),H:(e,t)=>D(e.getHours(),t.length),m:(e,t)=>D(e.getMinutes(),t.length),s:(e,t)=>D(e.getSeconds(),t.length),S(e,t){const s=t.length,a=e.getMilliseconds();return D(Math.trunc(a*Math.pow(10,s-3)),t.length)}},O="midnight",$="noon",E="morning",Y="afternoon",H="evening",z="night",I={G:function(e,t,s){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return s.ordinalNumber(a,{unit:"year"})}return F.y(e,t)},Y:function(e,t,s,a){const n=C(e,a),r=n>0?n:1-n;if("YY"===t){return D(r%100,2)}return"Yo"===t?s.ordinalNumber(r,{unit:"year"}):D(r,t.length)},R:function(e,t){return D(p(e),t.length)},u:function(e,t){return D(e.getFullYear(),t.length)},Q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return D(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return D(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){const a=e.getMonth();switch(t){case"M":case"MM":return F.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return D(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){const n=A(e,a);return"wo"===t?s.ordinalNumber(n,{unit:"week"}):D(n,t.length)},I:function(e,t,s){const a=K(e);return"Io"===t?s.ordinalNumber(a,{unit:"week"}):D(a,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):F.d(e,t)},D:function(e,t,s){const a=P(e);return"Do"===t?s.ordinalNumber(a,{unit:"dayOfYear"}):D(a,t.length)},E:function(e,t,s){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){const n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return D(r,2);case"eo":return s.ordinalNumber(r,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){const n=e.getDay(),r=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return D(r,t.length);case"co":return s.ordinalNumber(r,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,s){const a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return D(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const a=e.getHours();let n;switch(n=12===a?$:0===a?O:a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,s){const a=e.getHours();let n;switch(n=a>=17?H:a>=12?Y:a>=4?E:z,t){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return F.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):F.H(e,t)},K:function(e,t,s){const a=e.getHours()%12;return"Ko"===t?s.ordinalNumber(a,{unit:"hour"}):D(a,t.length)},k:function(e,t,s){let a=e.getHours();return 0===a&&(a=24),"ko"===t?s.ordinalNumber(a,{unit:"hour"}):D(a,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):F.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):F.s(e,t)},S:function(e,t){return F.S(e,t)},X:function(e,t,s){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return B(a);case"XXXX":case"XX":return q(a);default:return q(a,":")}},x:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"x":return B(a);case"xxxx":case"xx":return q(a);default:return q(a,":")}},O:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+L(a,":");default:return"GMT"+q(a,":")}},z:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+L(a,":");default:return"GMT"+q(a,":")}},t:function(e,t,s){return D(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,s){return D(e.getTime(),t.length)}};function L(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),r=a%60;return 0===r?s+String(n):s+String(n)+t+D(r,2)}function B(e,t){if(e%60==0){return(e>0?"-":"+")+D(Math.abs(e)/60,2)}return q(e,t)}function q(e,t=""){const s=e>0?"-":"+",a=Math.abs(e);return s+D(Math.trunc(a/60),2)+t+D(a%60,2)}const G=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},V=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},R={p:V,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return G(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",G(a,t)).replace("{{time}}",V(n,t))}},X=/^D+$/,Q=/^Y+$/,Z=["D","DD","YY","YYYY"];const J=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,U=/^'([^]*?)'?$/,ee=/''/g,te=/[a-zA-Z]/;function se(t,s,a){var n,r,i,o;const l=x(),c=l.locale??T,d=l.firstWeekContainsDate??(null==(r=null==(n=l.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??1,u=l.weekStartsOn??(null==(o=null==(i=l.locale)?void 0:i.options)?void 0:o.weekStartsOn)??0,m=e(t);if(!v(m))throw new RangeError("Invalid time value");let h=s.match(_).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,R[t])(e,c.formatLong)}return e}).join("").match(J).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ae(e)};if(I[t])return{isToken:!0,value:e};if(t.match(te))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});c.localize.preprocessor&&(h=c.localize.preprocessor(m,h));const g={firstWeekContainsDate:d,weekStartsOn:u,locale:c};return h.map(e=>{if(!e.isToken)return e.value;const a=e.value;(function(e){return Q.test(e)}(a)||function(e){return X.test(e)}(a))&&function(e,t,s){const a=function(e,t,s){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,s);if(Z.includes(e))throw new RangeError(a)}(a,s,String(t));return(0,I[a[0]])(m,a,c.localize,g)}).join("")}function ae(e){const t=e.match(U);return t?t[1].replace(ee,"'"):e}const ne=new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}),re=new Intl.NumberFormat("en-US",{maximumFractionDigits:1});function ie(e){return Number.isFinite(e)&&0!==e?ne.format(e).replace(/\.0([A-Za-z])/,"$1").replace(/\.0$/,""):"0"}function oe(e){return!Number.isFinite(e)||e<=0?"0":e>=1e3?ie(e):Math.round(e).toLocaleString()}function le(e){if(!Number.isFinite(e)||e<=0)return"0h";if(e>=10)return`${re.format(e)}h`;if(e>=1)return`${e.toFixed(1)}h`;return`${Math.round(60*e)}m`}function ce(e){const t=e=>Math.max(0,Math.min(e,432e5)),s=e.workLog;if(s&&Object.keys(s).length){const e=Object.values(s).filter(Boolean).map(e=>({first:new Date(e.first||0).getTime(),last:new Date(e.last||0).getTime()})).filter(e=>!Number.isNaN(e.first)&&!Number.isNaN(e.last)&&e.last>=e.first).sort((e,t)=>t.last-e.last)[0];if(e)return t(e.last-e.first)}if(e.loggedStartAt&&e.loggedEndAt){const s=new Date(e.loggedStartAt).getTime(),a=new Date(e.loggedEndAt).getTime();if(!Number.isNaN(s)&&!Number.isNaN(a)&&a>=s)return t(a-s)}return 0}function de(e){return e.phaseNumber??e.phase??null}function ue(e){return e.weekNumber??0}function me(e){return`P${de(e)??0}-W${ue(e)||0}`}function he(e){const t=de(e),s=ue(e)||0;return t?`Phase ${t} • Week ${s}`:`Week ${s}`}function xe(e){if(e)try{const t=i(e);if(!Number.isNaN(t.getTime()))return t}catch{}return new Date}const ge=[{key:"overview",label:"Overview",icon:"M3 12c0-5 4-9 9-9s9 4 9 9-4 9-9 9-9-4-9-9Zm9-6.5a1 1 0 0 0-1 1v4.09l-3.27 1.87a1 1 0 1 0 1 1.73l3.77-2.16A1 1 0 0 0 13 10V6.5a1 1 0 0 0-1-1Z"},{key:"sessions",label:"Sessions",icon:"M5 4h14v4H5V4Zm0 6h14v4H5v-4Zm0 6h14v4H5v-4Z"},{key:"muscles",label:"Muscles",icon:"M12 2 4 6v12l8 4 8-4V6l-8-4Zm0 2.3 5.5 3V8L12 11 6.5 8v-.7L12 4.3ZM6.5 10.2 11 13v6.2l-4.5-2.4v-6.6Zm6.5 8V13l4.5-2.8v6.6L13 18.2Z"},{key:"exercises",label:"Exercises",icon:"M4 4h16v4H4V4Zm0 6h10v4H4v-4Zm0 6h16v4H4v-4Z"}];function fe(){const[e,t]=c.useState("overview"),[s,a]=c.useState([]),[h,x]=c.useState([]),[g,f]=c.useState([]),[p,w]=c.useState(null),[b,v]=c.useState(null),[j,y]=c.useState(!0),[k,N]=c.useState(""),[M,S]=c.useState(""),[W,T]=c.useState(null),P=u();c.useEffect(()=>{let e=!1;return(async()=>{y(!0);try{const[t,s,i,o]=await Promise.all([n("sessions"),n("exercises"),n("measurements"),r()]);if(e)return;a(t||[]);const l=(s||[]).sort((e,t)=>e.name.localeCompare(t.name));x(l),f(i||[]),w(o||null)}finally{e||y(!1)}})(),d().then(t=>{e||v(t)}),()=>{e=!0}},[]);const K="lb"===((null==p?void 0:p.unit)??"kg"),C=K?2.2046226218:1,A=K?"lb":"kg",D=A,F=c.useMemo(()=>function(e,t){if(!e.length)return{totals:{workouts:0,sets:0,volumeKg:0,durationHours:0},weekly:[],sessions:[],muscles:[],exerciseMap:{}};const s=new Map(t.map(e=>[e.id,e])),a=new Map,n=[],r=new Map,o=new Map;let l=0,c=0,d=0,u=0;for(const i of e){if(!i||i.deletedAt)continue;const e=xe(i.dateISO||i.localDate).getTime();let t=0,h=0;const x=ce(i)/36e5;let g,f=0,p=-1/0;const w=new Map;for(const a of i.entries||[]){const e=s.get(a.exerciseId);if(!e)continue;if(!m(a.sets||[]))continue;let n=0,l=0,c=0;const d=[];for(const t of a.sets||[]){const e=Math.max(0,(null==t?void 0:t.reps)??0),s=Math.max(0,(null==t?void 0:t.weightKg)??0);0===e&&0===s||(n+=s*e,c+=e,s>l&&(l=s),d.push({weightKg:s,reps:e,rpe:(null==t?void 0:t.rpe)??null}))}const u=d.length;if(!u)continue;t+=u,h+=n,l>f&&(f=l),n>=p&&(p=n,g=e.name);const x=[e.muscleGroup||"other",...e.secondaryMuscles||[]],b=[1,...(e.secondaryMuscles||[]).map(()=>.5)],v=me(i);x.forEach((e,t)=>{if(!e)return;const s=b[t],a=s,o=r.get(e)??{sets:0,tonnageKg:0,sessions:new Set,weekBuckets:new Map};o.sets+=u*s,o.tonnageKg+=n*a,o.sessions.add(i.id);const l=o.weekBuckets.get(v)??{sets:0,tonnageKg:0};l.sets+=u*s,l.tonnageKg+=n*a,o.weekBuckets.set(v,l),r.set(e,o);const c=w.get(e)??{sets:0,tonnageKg:0};c.sets+=u*s,c.tonnageKg+=n*a,w.set(e,c)});const j=o.get(e.id)??{exercise:e,totals:{volumeKg:0,sets:0,sessions:0},maxTopWeightKg:0,timeline:[]};j.totals.volumeKg+=n,j.totals.sets+=u,j.totals.sessions+=1,j.maxTopWeightKg=Math.max(j.maxTopWeightKg,l),j.timeline.push({sessionId:i.id,dateISO:i.dateISO,weekNumber:i.weekNumber,phaseNumber:de(i),sets:u,volumeKg:n,topWeightKg:l,avgWeightKg:c?n/c:0,totalReps:c,setDetails:d}),o.set(e.id,j)}if(!t)continue;l+=1,c+=t,d+=h,u+=x;const b=me(i),v=he(i),j=a.get(b)??{key:b,label:v,weekNumber:ue(i),phaseNumber:de(i),sessions:0,sets:0,volumeKg:0,durationHours:0,avgVolumePerSessionKg:0,order:e};j.sessions+=1,j.sets+=t,j.volumeKg+=h,j.durationHours+=x,j.order=Math.min(j.order,e),a.set(b,j);const y=Array.from(w.entries()).sort((e,t)=>t[1].sets-e[1].sets).map(([e,s])=>({muscle:e,sets:s.sets,share:t?s.sets/t:0})).slice(0,4);n.push({id:i.id,dateISO:i.dateISO,weekNumber:ue(i),phaseNumber:de(i),sets:t,volumeKg:h,durationHours:x,topWeightKg:f,topExerciseName:g,muscleBreakdown:y})}const h=Array.from(a.values()).sort((e,t)=>e.order-t.order).map(e=>({key:e.key,label:e.label,weekNumber:e.weekNumber,phaseNumber:e.phaseNumber,sessions:e.sessions,sets:e.sets,volumeKg:e.volumeKg,durationHours:e.durationHours,avgVolumePerSessionKg:e.sessions?e.volumeKg/e.sessions:0})),x=n.sort((e,t)=>i(t.dateISO).getTime()-i(e.dateISO).getTime()),g=new Map,f=new Map;h.forEach((e,t)=>{g.set(e.key,t),f.set(e.key,e.label)});const p=Array.from(r.values()).reduce((e,t)=>e+t.sets,0),w=Array.from(r.entries()).map(([e,t])=>{const s=Array.from(t.weekBuckets.entries()).map(([e,t])=>({key:e,label:f.get(e)||e,sets:t.sets,tonnageKg:t.tonnageKg})).sort((e,t)=>(g.get(e.key)??0)-(g.get(t.key)??0));return{muscle:e,sets:t.sets,tonnageKg:t.tonnageKg,sessions:t.sessions.size,share:p?t.sets/p:0,timeline:s}}).sort((e,t)=>t.sets-e.sets),b={};return o.forEach((e,t)=>{e.timeline.sort((e,t)=>i(e.dateISO).getTime()-i(t.dateISO).getTime()),b[t]=e}),{totals:{workouts:l,sets:c,volumeKg:d,durationHours:u},weekly:h,sessions:x,muscles:w,exerciseMap:b}}(s,h),[s,h]),O=c.useRef(null),$=c.useRef(!1),E=c.useMemo(()=>{const e=M.trim().toLowerCase();return e?h.filter(t=>t.name.toLowerCase().includes(e)):h},[M,h]),Y=c.useMemo(()=>{if(!k)return E;if(E.some(e=>e.id===k))return E;const e=h.find(e=>e.id===k);return e?[e,...E.filter(t=>t.id!==e.id)]:E},[E,h,k]);c.useEffect(()=>{!k&&Y.length&&N(Y[0].id)},[Y,k]),c.useEffect(()=>{if(!$.current)return;const e=O.current;if($.current=!1,!e||document.activeElement===e)return;e.focus({preventScroll:!0});const t=e.value.length;try{e.setSelectionRange(t,t)}catch{}},[M,Y,k]),c.useEffect(()=>{if(!k){const e=Object.entries(F.exerciseMap).find(([,e])=>e.timeline.length>0);e?N(e[0]):h.length&&N(h[0].id)}},[F.exerciseMap,h,k]),c.useEffect(()=>{!W&&F.muscles.length&&T(F.muscles[0].muscle)},[F.muscles,W]);const H=c.useMemo(()=>g.filter(e=>Number.isFinite(e.weightKg)).sort((e,t)=>i(e.dateISO).getTime()-i(t.dateISO).getTime()).map(e=>({date:se(i(e.dateISO),"MMM d"),value:(e.weightKg||0)*C})),[g,C]),z=c.useMemo(()=>F.weekly.map(e=>({key:e.key,label:e.label,volume:e.volumeKg*C,sessions:e.sessions,sets:e.sets,avg:e.avgVolumePerSessionKg*C})),[F.weekly,C]),I=c.useMemo(()=>P.data?z.map(e=>{var t;return{...e,prs:(null==(t=P.data)?void 0:t.weeklyPRCounts[e.key])??0}}):z.map(e=>({...e,prs:0})),[P.data,z]),L=k?F.exerciseMap[k]:void 0,B=(null==L?void 0:L.timeline)??[],q=W?F.muscles.find(e=>e.muscle===W):void 0,G=o.jsx("div",{className:"h-60 rounded-3xl bg-slate-800/40 animate-pulse flex items-center justify-center text-xs text-slate-400",children:"Loading chart…"}),V=e=>{const t=e*C;return!Number.isFinite(t)||t<=0?`0 ${A}`:t>=200?`${Math.round(t)} ${A}`:t>=20?`${t.toFixed(1)} ${A}`:`${t.toFixed(2)} ${A}`},R=e=>`${ie(e*C)} ${D}`,X=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid gap-4 lg:grid-cols-4 sm:grid-cols-2",children:[{label:"Workouts",value:oe(F.totals.workouts),caption:"Logged"},{label:"Sets",value:oe(F.totals.sets),caption:"Tracked"},{label:"Volume",value:R(F.totals.volumeKg),caption:"Lifetime"},{label:"Active Time",value:le(F.totals.durationHours),caption:"Recorded"}].map(e=>o.jsx(l,{children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-[10px] uppercase tracking-[0.35em] text-white/50",children:e.caption}),o.jsx("div",{className:"text-3xl font-semibold tracking-tight text-white",children:e.value}),o.jsx("p",{className:"text-sm text-white/60",children:e.label})]})},e.label))}),o.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,2fr)_minmax(0,1.2fr)]",children:[o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Weekly Trends"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Volume & Sessions"})]}),o.jsx("span",{className:"text-xs text-white/50",children:D})]}),o.jsxs("div",{className:"h-64",children:[!b&&G,b&&o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.ComposedChart,{data:z,margin:{left:8,right:16,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.2)"}),o.jsx(b.XAxis,{dataKey:"label",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},interval:0,tickFormatter:e=>e.replace("Phase","P").replace("Week","W")}),o.jsx(b.YAxis,{yAxisId:"left",stroke:"rgba(94,234,212,0.7)",tick:{fontSize:12},tickFormatter:e=>ie(e)}),o.jsx(b.YAxis,{yAxisId:"right",orientation:"right",stroke:"rgba(139,92,246,0.6)",tick:{fontSize:12}}),o.jsx(b.Tooltip,{formatter:(e,t)=>"sessions"===t||"sets"===t?[oe(e),t]:[`${ie(e)} ${D}`,t]}),o.jsx(b.Area,{yAxisId:"left",type:"monotone",dataKey:"volume",stroke:"rgba(45,212,191,0.9)",fill:"rgba(20,184,166,0.25)",strokeWidth:2.2,name:`Volume (${D})`}),o.jsx(b.Line,{yAxisId:"right",type:"monotone",dataKey:"sessions",stroke:"rgba(139,92,246,0.85)",strokeWidth:2.2,dot:{r:3},name:"Sessions"}),o.jsx(b.Line,{yAxisId:"right",type:"monotone",dataKey:"sets",stroke:"rgba(96,165,250,0.85)",strokeDasharray:"5 4",strokeWidth:2,dot:!1,name:"Sets"})]})})]})]}),o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Bodyweight"}),o.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Trend (last ",H.length," entries)"]})]}),o.jsx("span",{className:"text-xs text-white/50",children:A})]}),o.jsxs("div",{className:"h-64",children:[!b&&G,b&&o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.AreaChart,{data:H,margin:{left:0,right:0,top:10,bottom:0},children:[o.jsx(b.Defs,{children:o.jsxs("linearGradient",{id:"bwGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"rgba(59,130,246,0.7)",stopOpacity:.8}),o.jsx("stop",{offset:"95%",stopColor:"rgba(59,130,246,0.1)",stopOpacity:.1})]})}),o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),o.jsx(b.XAxis,{dataKey:"date",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12}}),o.jsx(b.YAxis,{stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},tickFormatter:e=>e.toFixed(1)}),o.jsx(b.Tooltip,{formatter:e=>`${e.toFixed(1)} ${A}`}),o.jsx(b.Area,{type:"monotone",dataKey:"value",stroke:"rgba(59,130,246,0.9)",fill:"url(#bwGradient)",strokeWidth:2.2})]})})]})]})]}),o.jsxs(l,{children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Personal Records"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Weekly highlights"})]})}),o.jsxs("div",{className:"h-56",children:[!b&&G,b&&o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.BarChart,{data:I,margin:{left:8,right:8,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),o.jsx(b.XAxis,{dataKey:"label",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},interval:0,tickFormatter:e=>e.replace("Phase","P").replace("Week","W")}),o.jsx(b.YAxis,{stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},allowDecimals:!1}),o.jsx(b.Tooltip,{}),o.jsx(b.Bar,{dataKey:"prs",fill:"rgba(16,185,129,0.8)",radius:[6,6,0,0]})]})})]})]})]}),Q=()=>o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,2fr)_minmax(0,1.1fr)]",children:[o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Session Timeline"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Volume by Session"})]}),o.jsx("span",{className:"text-xs text-white/50",children:D})]}),o.jsxs("div",{className:"h-72",children:[!b&&G,b&&o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.AreaChart,{data:F.sessions.slice().reverse().map(e=>({date:se(i(e.dateISO),"MMM d"),volume:e.volumeKg*C,sets:e.sets,topWeight:e.topWeightKg*C})),margin:{left:8,right:16,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),o.jsx(b.XAxis,{dataKey:"date",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12}}),o.jsx(b.YAxis,{stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},tickFormatter:e=>ie(e)}),o.jsx(b.Tooltip,{formatter:(e,t)=>"sets"===t?[oe(e),"Sets"]:"topWeight"===t?[`${e.toFixed(1)} ${A}`,"Top weight"]:[`${ie(e)} ${D}`,"Volume"]}),o.jsx(b.Area,{type:"monotone",dataKey:"volume",stroke:"rgba(239,68,68,0.85)",fill:"rgba(239,68,68,0.18)",strokeWidth:2.4}),o.jsx(b.Line,{type:"monotone",dataKey:"topWeight",stroke:"rgba(59,130,246,0.85)",strokeWidth:2.2,dot:{r:2}})]})})]})]}),o.jsxs(l,{children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Snapshot"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Latest sessions"})]})}),o.jsxs("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-2",children:[F.sessions.slice(0,8).map(e=>o.jsxs("div",{className:"rounded-2xl border border-white/5 bg-slate-900/60 px-4 py-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm text-white/80",children:[o.jsx("span",{className:"font-medium",children:se(i(e.dateISO),"EEE • MMM d")}),o.jsx("span",{className:"text-xs text-white/50",children:e.phaseNumber?`P${e.phaseNumber} • W${e.weekNumber}`:`Week ${e.weekNumber}`})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-white/70",children:[o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Volume"}),o.jsx("p",{className:"text-base font-semibold text-white",children:R(e.volumeKg)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Top weight"}),o.jsx("p",{className:"text-base font-semibold text-white",children:V(e.topWeightKg)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Sets"}),o.jsx("p",{className:"text-base font-semibold text-white",children:oe(e.sets)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Active time"}),o.jsx("p",{className:"text-base font-semibold text-white",children:le(e.durationHours)})]})]}),e.topExerciseName&&o.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Focus: ",o.jsx("span",{className:"text-white/80",children:e.topExerciseName})]}),e.muscleBreakdown.length>0&&o.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px] text-white/60",children:e.muscleBreakdown.map(e=>o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/5 px-2 py-0.5",children:[o.jsx("span",{className:"capitalize",children:e.muscle}),o.jsxs("span",{className:"text-white/40",children:[(100*e.share).toFixed(0),"%"]})]},e.muscle))})]},e.id)),!F.sessions.length&&o.jsx("p",{className:"text-sm text-white/50",children:"Log a workout to unlock session analytics."})]})]})]})}),Z=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs(l,{children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Muscle Focus"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Top recruitment (weighted sets)"})]})}),o.jsx("div",{className:"overflow-x-auto pb-2",children:o.jsx("div",{className:"flex gap-2 min-w-max",children:F.muscles.slice(0,12).map(e=>o.jsxs("button",{onClick:()=>T(e.muscle),className:"rounded-2xl px-3 py-2 text-sm font-medium transition-colors "+(W===e.muscle?"bg-emerald-500/20 text-emerald-200 border border-emerald-400/40":"bg-white/5 text-white/70 border border-white/10 hover:border-white/20"),children:[o.jsx("span",{className:"block capitalize",children:e.muscle}),o.jsxs("span",{className:"block text-[11px] text-white/50",children:[oe(Math.round(e.sets))," sets"]})]},e.muscle))})})]}),o.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]",children:[o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Distribution"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Sets by muscle group"})]}),o.jsx("span",{className:"text-xs text-white/50",children:"share"})]}),o.jsxs("div",{className:"h-72",children:[!b&&G,b&&o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.BarChart,{data:F.muscles.slice(0,10).map(e=>({muscle:e.muscle,sets:e.sets,share:(100*e.share).toFixed(1)})),layout:"vertical",margin:{left:16,right:16,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{horizontal:!1,stroke:"rgba(148,163,184,0.12)"}),o.jsx(b.XAxis,{type:"number",hide:!0,domain:[0,"dataMax"]}),o.jsx(b.YAxis,{type:"category",dataKey:"muscle",tickFormatter:e=>e.replace(/_/g," "),stroke:"rgba(226,232,240,0.7)",tick:{fontSize:12}}),o.jsx(b.Tooltip,{formatter:(e,t)=>"sets"===t?[oe(e),"Sets"]:[`${e}%`,"Share"]}),o.jsx(b.Bar,{dataKey:"sets",fill:"rgba(34,197,94,0.8)",radius:[0,6,6,0]})]})})]})]}),o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Focus timeline"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:q?q.muscle:"Select a muscle"})]}),q&&o.jsxs("span",{className:"text-xs text-white/50",children:[oe(Math.round(q.sets))," sets •"," ",R(q.tonnageKg)]})]}),o.jsxs("div",{className:"h-72",children:[!b&&G,b&&q&&q.timeline.length?o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.AreaChart,{data:q.timeline,margin:{left:8,right:16,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),o.jsx(b.XAxis,{dataKey:"label",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12}}),o.jsx(b.YAxis,{stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},tickFormatter:e=>oe(e)}),o.jsx(b.Tooltip,{formatter:(e,t)=>"sets"===t?[oe(e),"Sets"]:[R(e),"Volume"]}),o.jsx(b.Area,{type:"monotone",dataKey:"sets",stroke:"rgba(236,72,153,0.85)",fill:"rgba(236,72,153,0.25)",strokeWidth:2.4}),o.jsx(b.Line,{type:"monotone",dataKey:"tonnageKg",stroke:"rgba(244,114,182,0.9)",strokeWidth:2.2,dot:{r:2},name:"Volume"})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-sm text-white/50",children:W?"No data for this muscle yet.":"Select a muscle to explore its timeline."})]})]})]})]}),J=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx(l,{children:o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Exercise analytics"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Choose an exercise to deep dive"})]}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[o.jsxs("div",{className:"relative w-full sm:w-52",children:[o.jsx("svg",{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-white/40",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 3.473 9.8l3.113 3.114a.75.75 0 1 0 1.06-1.06l-3.113-3.115A5.5 5.5 0 0 0 9 3.5Zm-4 5.5a4 4 0 1 1 7.999.002A4 4 0 0 1 5 9Z",clipRule:"evenodd"})}),o.jsx("input",{ref:O,value:M,onChange:e=>{$.current=!0,S(e.target.value)},onFocus:()=>{$.current=!1},onBlur:()=>{$.current=!1},placeholder:"Search exercises",className:"w-full rounded-2xl border border-white/10 bg-slate-900/60 py-2 pl-9 pr-9 text-sm text-white/80 placeholder:text-white/40 focus:outline-none focus-visible:ring focus-visible:ring-emerald-400/60",type:"search",spellCheck:!1}),M&&o.jsx("button",{type:"button",onClick:()=>{$.current=!0,S("")},className:"absolute right-2 top-1/2 flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded-full text-white/50 transition hover:text-white/80","aria-label":"Clear exercise search",children:"×"})]}),o.jsx("select",{className:"rounded-2xl border border-white/10 bg-slate-900/60 px-3 py-2 text-sm text-white/80 focus:outline-none focus-visible:ring focus-visible:ring-emerald-400/60 disabled:cursor-not-allowed disabled:text-white/30",value:Y.length?k:"",onChange:e=>N(e.target.value),disabled:!Y.length,children:Y.length?Y.map(e=>o.jsx("option",{value:e.id,children:e.name},e.id)):o.jsx("option",{value:"",disabled:!0,children:"No exercises found"})})]})]}),M&&!E.length&&o.jsxs("p",{className:"text-xs text-rose-200/70",children:["No exercises match “",M,"”. Try a different term."]})]})}),o.jsxs("div",{className:"grid gap-4 xl:grid-cols-[minmax(0,2fr)_minmax(0,1.1fr)]",children:[o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Performance curve"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:(null==L?void 0:L.exercise.name)||"Select an exercise"})]}),L&&o.jsxs("span",{className:"text-xs text-white/50",children:["Best: ",V(L.maxTopWeightKg)]})]}),o.jsxs("div",{className:"h-72",children:[!b&&G,b&&B.length?o.jsx(b.ResponsiveContainer,{children:o.jsxs(b.ComposedChart,{data:B.map(e=>({date:se(i(e.dateISO),"MMM d"),volume:e.volumeKg*C,topWeight:e.topWeightKg*C,avgWeight:e.avgWeightKg*C,sets:e.sets})),margin:{left:8,right:16,top:10,bottom:0},children:[o.jsx(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.15)"}),o.jsx(b.XAxis,{dataKey:"date",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12}}),o.jsx(b.YAxis,{yAxisId:"left",stroke:"rgba(226,232,240,0.65)",tick:{fontSize:12},tickFormatter:e=>ie(e)}),o.jsx(b.YAxis,{yAxisId:"right",orientation:"right",stroke:"rgba(59,130,246,0.7)",tick:{fontSize:12},tickFormatter:e=>e.toFixed(0)}),o.jsx(b.Tooltip,{formatter:(e,t)=>"sets"===t?[oe(e),"Sets"]:"topWeight"===t||"avgWeight"===t?[`${e.toFixed(1)} ${A}`,"topWeight"===t?"Top":"Avg"]:[`${ie(e)} ${D}`,"Volume"]}),o.jsx(b.Area,{yAxisId:"left",type:"monotone",dataKey:"volume",stroke:"rgba(248,113,113,0.9)",fill:"rgba(248,113,113,0.2)",strokeWidth:2.4,name:`Volume (${D})`}),o.jsx(b.Line,{yAxisId:"right",type:"monotone",dataKey:"topWeight",stroke:"rgba(59,130,246,0.9)",strokeWidth:2.4,dot:{r:2},name:`Top (${A})`}),o.jsx(b.Line,{yAxisId:"right",type:"monotone",dataKey:"avgWeight",stroke:"rgba(96,165,250,0.8)",strokeDasharray:"5 4",strokeWidth:2,dot:!1,name:`Avg (${A})`})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-sm text-white/50",children:"Select an exercise with logged sets to view progress."})]})]}),o.jsxs(l,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:"Session log"}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Most recent workouts"})]}),L&&o.jsxs("span",{className:"text-xs text-white/50",children:[oe(L.totals.sessions)," sessions tracked"]})]}),o.jsxs("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-2",children:[B.slice().sort((e,t)=>i(t.dateISO).getTime()-i(e.dateISO).getTime()).slice(0,6).map(e=>o.jsxs("div",{className:"rounded-2xl border border-white/5 bg-slate-900/60 px-4 py-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm text-white/80",children:[o.jsx("span",{className:"font-medium",children:se(i(e.dateISO),"EEE • MMM d")}),o.jsx("span",{className:"text-xs text-white/50",children:e.phaseNumber?`P${e.phaseNumber} • W${e.weekNumber}`:`Week ${e.weekNumber}`})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-white/70",children:[o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Volume"}),o.jsx("p",{className:"text-base font-semibold text-white",children:R(e.volumeKg)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"uppercase tracking-[0.3em] text-white/40",children:"Top weight"}),o.jsx("p",{className:"text-base font-semibold text-white",children:V(e.topWeightKg)})]})]}),o.jsx("div",{className:"mt-3 space-y-1",children:e.setDetails.map((e,t)=>o.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60",children:[o.jsxs("span",{className:"text-white/40",children:["Set ",t+1]}),o.jsxs("span",{className:"tabular-nums text-white/80",children:[oe(e.reps)," reps @ ",V(e.weightKg),null!=e.rpe&&o.jsxs("span",{className:"text-white/40",children:[" • RPE ",e.rpe]})]})]},t))})]},e.sessionId+e.dateISO)),!B.length&&o.jsx("p",{className:"text-sm text-white/50",children:"No logged sets yet for this exercise."})]})]})]})]});return o.jsxs("div",{className:"space-y-8 pb-24",children:[o.jsxs("header",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.38em] text-white/50",children:"Insights"}),o.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white",children:"Analytics Studio"}),o.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Explore weekly momentum, session quality, muscle balance, and exercise-specific trends with interactive visuals."})]})}),o.jsx("div",{className:"inline-flex flex-wrap items-center gap-2 rounded-full border border-white/10 bg-slate-950/70 p-1 shadow-[0_8px_30px_-12px_rgba(16,185,129,0.55)]",children:ge.map(s=>o.jsxs("button",{onClick:()=>t(s.key),className:"flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium transition-colors "+(e===s.key?"bg-emerald-500/20 text-emerald-200 shadow-inner shadow-emerald-500/30":"text-white/60 hover:text-white"),children:[o.jsx("svg",{"aria-hidden":!0,className:"h-4 w-4 "+(e===s.key?"fill-emerald-300":"fill-white/50"),viewBox:"0 0 24 24",children:o.jsx("path",{d:s.icon})}),s.label]},s.key))})]}),j?o.jsx("div",{className:"space-y-6",children:[...Array(3)].map((e,t)=>o.jsx("div",{className:"h-60 rounded-3xl bg-slate-900/40 animate-pulse"},t))}):o.jsxs(o.Fragment,{children:["overview"===e&&o.jsx(X,{}),"sessions"===e&&o.jsx(Q,{}),"muscles"===e&&o.jsx(Z,{}),"exercises"===e&&o.jsx(J,{})]})]})}export{fe as default};
