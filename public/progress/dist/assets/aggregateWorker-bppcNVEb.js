!function(){"use strict";self.onmessage=e=>{const{sessions:s,exercises:o}=e.data;try{const e=new Map(o.map(e=>[e.id,e])),t={},r={},c={};s.forEach(s=>{const o=`P${s.phaseNumber||s.phase||1}-W${s.weekNumber||1}`,n=t[o]||(t[o]={});s.entries.forEach(s=>{const t=e.get(s.exerciseId);let a=0,i=0;if(s.sets.forEach(e=>{const s=(e.weightKg||0)*(e.reps||0);s>0&&(i++,a=Math.max(a,s))}),0===i)return;const l=(null==t?void 0:t.muscleGroup)||"other";n[l]=(n[l]||0)+i,(null==t?void 0:t.secondaryMuscles)&&t.secondaryMuscles.forEach(e=>{n[e]=(n[e]||0)+.5*i});const u=r[s.exerciseId];a>0&&(!u||a>u.bestScore)&&(r[s.exerciseId]={bestScore:a,est1RM:a},c[o]=(c[o]||0)+1)})}),self.postMessage({weeklyVolume:t,exercisePRs:r,weeklyPRCounts:c,lastComputed:Date.now(),version:1})}catch(t){self.postMessage({error:(null==t?void 0:t.message)||String(t),version:1})}}}();
