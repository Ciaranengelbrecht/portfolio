@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
  --accent: #22c55e; /* default accent */
  --accent-hover: #16a34a;
  --card-bg: #111826;
  --card-border: rgba(255, 255, 255, 0.05);
  /* Spacing scale (soft 1.25 ratio) */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem;  /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem;    /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem;  /* 24px */
  --space-7: 1.875rem; /* 30px */
  --space-8: 2.25rem; /* 36px */
  --space-9: 2.75rem; /* 44px */
  --space-10: 3.5rem; /* 56px */

  /* Radius tokens */
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* Typography scale (fluid clamp) */
  --font-display-lg: clamp(2.4rem, 4vw + 1.6rem, 3.25rem);
  --font-display: clamp(2rem, 3.2vw + 1.2rem, 2.6rem);
  --font-title: clamp(1.5rem, 1.7vw + 1rem, 1.9rem);
  --font-subtitle: clamp(1.25rem, 1.2vw + 0.9rem, 1.4rem);
  --font-body-lg: clamp(1.05rem, 0.6vw + .85rem, 1.15rem);
  --font-body: clamp(.94rem, 0.45vw + .78rem, 1rem);
  --font-body-sm: clamp(.78rem, 0.35vw + .68rem, .88rem);
  --font-label: clamp(.68rem, 0.3vw + .6rem, .75rem);

  /* Line heights */
  --leading-tight: 1.1;
  --leading-title: 1.15;
  --leading-body: 1.4;
  --leading-small: 1.2;
}

html,
body,
#root {
  height: 100%;
}

input[type="number"] {
  /* iOS brings numeric keypad */
  font-variant-numeric: tabular-nums;
}

/* simple shadcn-like tokens via tailwind */

/* Utility classes for typography tokens */
@layer utilities {
  .text-display-lg { font-size: var(--font-display-lg); line-height: var(--leading-tight); font-weight:600; letter-spacing:-0.02em; }
  .text-display { font-size: var(--font-display); line-height: var(--leading-tight); font-weight:600; letter-spacing:-0.02em; }
  .text-title { font-size: var(--font-title); line-height: var(--leading-title); font-weight:600; letter-spacing:-0.015em; }
  .text-subtitle { font-size: var(--font-subtitle); line-height: var(--leading-title); font-weight:500; letter-spacing:-0.01em; }
  .text-body-lg { font-size: var(--font-body-lg); line-height: var(--leading-body); font-weight:450; }
  .text-body { font-size: var(--font-body); line-height: var(--leading-body); font-weight:450; }
  .text-body-sm { font-size: var(--font-body-sm); line-height: var(--leading-small); font-weight:500; letter-spacing:0; }
  .text-label { font-size: var(--font-label); line-height: var(--leading-small); font-weight:600; letter-spacing:0.02em; text-transform:uppercase; }
  .leading-tight { line-height: var(--leading-tight); }
}

/* Stack utility (vertical rhythm) */
@layer utilities {
  .stack-2 > * + * { margin-top: var(--space-2); }
  .stack-3 > * + * { margin-top: var(--space-3); }
  .stack-4 > * + * { margin-top: var(--space-4); }
  .stack-5 > * + * { margin-top: var(--space-5); }
  .stack-6 > * + * { margin-top: var(--space-6); }
  .glow-card { position:relative; border-radius:1rem; background:rgba(15,23,42,0.7); border:1px solid rgba(255,255,255,0.07); backdrop-filter:blur(8px); box-shadow:0 4px 18px -6px rgba(0,185,255,0.15),0 0 0 1px rgba(255,255,255,0.03); transition: box-shadow .4s ease, border-color .4s ease, background .4s ease; }
  .glow-card::before, .glow-card::after { content:""; position:absolute; inset:0; border-radius:inherit; opacity:0; pointer-events:none; transition:opacity .6s ease; }
  .glow-card::before { background:radial-gradient(circle at 28% 22%, rgba(0,185,255,0.22), transparent 60%), radial-gradient(circle at 78% 72%, rgba(77,91,255,0.18), transparent 65%); mix-blend-mode:screen; }
  .glow-card::after { background:linear-gradient(145deg, rgba(0,185,255,0.28), rgba(77,91,255,0.15) 42%, transparent 70%); filter:blur(22px); }
  .glow-card:hover { border-color:rgba(0,185,255,0.38); box-shadow:0 0 0 1px rgba(0,185,255,0.3),0 8px 30px -8px rgba(0,185,255,0.35),0 16px 40px -14px rgba(77,91,255,0.25); }
  .glow-card:hover::before, .glow-card:hover::after { opacity:1; }
  @media (prefers-reduced-motion: reduce){ .glow-card, .glow-card::before, .glow-card::after { transition:none; } }
  /* Accent-adaptive elevated glow card */
  .card-enhanced { position:relative; border-radius:1rem; background:rgba(17,24,39,0.52); backdrop-filter:blur(6px) saturate(125%); border:1px solid rgba(var(--accent-rgb,59 130 246)/0.27); box-shadow:
    0 0 0 1px rgba(var(--accent-rgb,59 130 246)/0.27),
    0 0 20px 0 rgba(var(--accent-rgb,59 130 246)/0.32),
    0 16px 30px -12px rgba(var(--accent-rgb,59 130 246)/0.24);
    transition: border-color .35s ease, box-shadow .5s ease, background .5s ease; }
  /* Edge glow rim (mask creates hollow center) */
  .card-enhanced::before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(145deg, rgba(var(--accent-rgb,59 130 246)/0.6), rgba(var(--accent-rgb,59 130 246)/0.18) 45%, transparent 80%); -webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.65; pointer-events:none; transition:opacity .4s ease; }
  /* Soft outer ambient halo */
  .card-enhanced::after { content:""; position:absolute; inset:-5px; border-radius:inherit; background:radial-gradient(circle at 50% 60%, rgba(var(--accent-rgb,59 130 246)/0.34), transparent 78%); filter:blur(24px); opacity:.48; pointer-events:none; transition:opacity .5s ease, filter .5s ease; }
  /* Hover: modest bump (slightly less than previous) */
  .card-enhanced:hover { border-color:rgba(var(--accent-rgb,59 130 246)/0.42); box-shadow:
    0 0 0 1px rgba(var(--accent-rgb,59 130 246)/0.34),
    0 0 24px 2px rgba(var(--accent-rgb,59 130 246)/0.44),
    0 20px 42px -12px rgba(var(--accent-rgb,59 130 246)/0.32);
  }
  .card-enhanced:hover::before { opacity:.78; }
  .card-enhanced:hover::after { opacity:.56; filter:blur(30px); }
  @media (prefers-reduced-motion: reduce){ .card-enhanced, .card-enhanced::before { transition:none; } }
}

/* Accent overrides */
.bg-brand-600 {
  background-color: var(--accent) !important;
}
.hover\:bg-brand-700:hover {
  background-color: var(--accent-hover) !important;
}

/* Card style variants via data attribute */
[data-card-style="glass"] .bg-card {
  background-color: color-mix(
    in srgb,
    var(--card-bg) 85%,
    transparent
  ) !important;
  backdrop-filter: blur(6px);
}
[data-card-style="solid"] .bg-card {
  background-color: var(--card-bg) !important;
}
[data-card-style="minimal"] .bg-card {
  background-color: transparent !important;
  border: 1px solid var(--card-border);
  box-shadow: none !important;
}

/* Rest timer enhancements */
.rest-btn-running {
  position: relative;
  box-shadow: 0 0 0 0 rgba(34,197,94,0.5);
  animation: restPulse 2s ease-in-out infinite;
}
.rest-btn-running::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 9999px;
  background: radial-gradient(circle at 30% 30%, rgba(34,197,94,0.35), transparent 70%);
  pointer-events: none;
  filter: blur(4px);
  opacity: 0.8;
}
@keyframes restPulse {
  0% { box-shadow: 0 0 0 0 rgba(34,197,94,0.55); }
  70% { box-shadow: 0 0 0 14px rgba(34,197,94,0); }
  100% { box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}
.rest-timer-chip.running {
  --ring: 120 100% 65%;
  box-shadow: 0 0 0 1px rgba(34,197,94,0.4), 0 0 8px 2px rgba(34,197,94,0.35), inset 0 0 4px 1px rgba(34,197,94,0.25);
  animation: timerGlow 1.8s linear infinite;
}
.rest-timer-chip.finished {
  animation: timerFinish 0.9s ease-in-out forwards;
}
@keyframes timerGlow {
  0%,100% { filter: brightness(1); }
  50% { filter: brightness(1.25); }
}
@keyframes timerFinish {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0.6); }
  60% { transform: scale(1.06); box-shadow: 0 0 0 12px rgba(34,197,94,0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}

/* New minimalist timer styling */
.rest-timer {
  position: relative;
  line-height: 1.1;
}
@keyframes timerPulse {
  0%,100% { text-shadow: 0 0 4px rgba(34,197,94,0.4), 0 0 10px rgba(34,197,94,0.15); }
  50% { text-shadow: 0 0 6px rgba(34,197,94,0.75), 0 0 18px rgba(34,197,94,0.35); }
}
@keyframes timerFinishPop {
  0% { transform: scale(1); filter: brightness(1); }
  40% { transform: scale(1.08); filter: brightness(1.35); }
  100% { transform: scale(1); filter: brightness(1); }
}

@keyframes timerPulseFast {
  0%,100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.06); }
}

/* Strong alert when rest target reached */
.rest-strong-alert .rest-timer-value { animation: restStrongPulse 1.1s ease-in-out 2; }
@keyframes restStrongPulse {
  0% { transform: scale(1); filter: brightness(1); text-shadow: 0 0 0 rgba(255,255,255,0); }
  25% { transform: scale(1.25); filter: brightness(1.6); text-shadow: 0 0 14px rgba(255,255,255,0.85),0 0 28px rgba(244,63,94,0.65); }
  55% { transform: scale(1.15); filter: brightness(1.3); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Optional page flash */
.rest-screen-flash::before {
  content:""; position:fixed; inset:0; background:radial-gradient(circle at 50% 50%, rgba(255,255,255,0.9), rgba(255,255,255,0) 70%);
  animation: restFlash 480ms ease-out forwards; pointer-events:none; mix-blend-mode:overlay; z-index:9999;
}
@keyframes restFlash { 0% { opacity:0; } 10% { opacity:1; } 100% { opacity:0; } }

/* Stamp button press feedback */
.animate-stamp {
  animation: stampPress 0.36s cubic-bezier(.34,1.56,.64,1);
}
@keyframes stampPress {
  0% { transform: translateY(0) scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0.0); }
  35% { transform: translateY(1px) scale(0.94); box-shadow: 0 0 0 0 rgba(34,197,94,0.0); }
  60% { transform: translateY(-2px) scale(1.08); box-shadow: 0 0 0 6px rgba(34,197,94,0.25); }
  100% { transform: translateY(0) scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}

/* Compact tool buttons (mobile tools panel) */
.tool-btn {
  padding: 0.5rem 0.5rem;
  border-radius: 0.75rem;
  background: rgba(51,65,85,0.8); /* slate-700/80 */
  border: 1px solid rgba(255,255,255,0.05);
  text-align: center;
  font-size: 11px;
  font-weight: 500;
  letter-spacing: -0.01em;
  line-height: 1.1;
  transition: background .18s ease, transform .18s ease;
  backdrop-filter: blur(4px);
}
.tool-btn:hover { background: rgba(71,85,105,0.8); }
.tool-btn:active { transform: scale(.96); }
.tool-btn.col-span-2 { background: rgba(51,65,85,0.6); }
.tool-btn:hover { text-shadow: 0 0 4px rgba(255,255,255,0.15); }

/* Skeleton shimmer */
.skeleton {
  position: relative;
  overflow: hidden;
  background: rgba(255,255,255,0.06);
}
.skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.10), rgba(255,255,255,0));
  animation: skeletonShimmer 1200ms ease-in-out infinite;
}
@keyframes skeletonShimmer {
  100% { transform: translateX(100%); }
}

/* Touch-safe button utilities (minimum 44x44px for mobile accessibility) */
@layer components {
  /* Base touch-safe button - minimum 44px touch target */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] px-3 py-2.5;
    @apply text-sm font-medium;
    @apply active:scale-95 transition-transform duration-150;
    @apply flex items-center justify-center;
  }

  /* Touch-safe icon-only button */
  .btn-touch-icon {
    @apply min-h-[44px] min-w-[44px] p-2;
    @apply flex items-center justify-center;
    @apply active:scale-95 transition-transform duration-150;
  }

  /* Touch-safe primary button */
  .btn-touch-primary {
    @apply btn-touch;
    @apply bg-emerald-600 hover:bg-emerald-700;
    @apply text-white rounded-xl;
    @apply shadow-sm;
  }

  /* Touch-safe secondary button */
  .btn-touch-secondary {
    @apply btn-touch;
    @apply bg-slate-700 hover:bg-slate-600;
    @apply text-white rounded-xl;
    @apply border border-slate-600/50;
  }

  /* Touch-safe danger button */
  .btn-touch-danger {
    @apply btn-touch;
    @apply bg-red-600/90 hover:bg-red-600;
    @apply text-white rounded-xl;
    @apply shadow-sm;
  }

  /* Touch-safe ghost button */
  .btn-touch-ghost {
    @apply btn-touch;
    @apply bg-transparent hover:bg-slate-700/50;
    @apply text-slate-300 rounded-xl;
    @apply border border-slate-700/50 hover:border-slate-600;
  }

  /* Touch-safe compact button (still meets 44px minimum, but tighter spacing) */
  .btn-touch-compact {
    @apply min-h-[44px] px-3 py-2;
    @apply text-xs font-medium;
    @apply active:scale-95 transition-transform duration-150;
    @apply flex items-center justify-center gap-1.5;
  }

  /* Touch-safe icon button variants */
  .btn-touch-icon-primary {
    @apply btn-touch-icon;
    @apply bg-emerald-600 hover:bg-emerald-700;
    @apply text-white rounded-xl;
  }

  .btn-touch-icon-secondary {
    @apply btn-touch-icon;
    @apply bg-slate-700 hover:bg-slate-600;
    @apply text-white rounded-xl;
  }

  .btn-touch-icon-danger {
    @apply btn-touch-icon;
    @apply bg-red-600/90 hover:bg-red-600;
    @apply text-white rounded-xl;
  }

  .btn-touch-icon-ghost {
    @apply btn-touch-icon;
    @apply bg-transparent hover:bg-slate-700/50;
    @apply text-slate-300 rounded-xl;
    @apply border border-slate-700/50 hover:border-slate-600;
  }

  /* ===== PHASE 1: VISUAL ENHANCEMENTS ===== */
  
  /* Enhanced Input Fields - Better visibility and focus states */
  .input-enhanced {
    @apply bg-slate-950/80 border-2 border-slate-700/50 rounded-xl px-4 py-3;
    @apply text-white placeholder:text-slate-500;
    @apply transition-all duration-200;
    @apply focus:bg-slate-900 focus:border-emerald-500/50 focus:ring-4 focus:ring-emerald-500/20;
    @apply hover:border-slate-600/60;
  }

  /* Number inputs (weight/reps) - Center-aligned with better contrast */
  .input-number-enhanced {
    @apply bg-slate-950/90 border-2 border-slate-700/50 rounded-xl px-2 py-2.5;
    @apply text-white text-center font-bold tabular-nums;
    @apply text-lg; /* Readable but fits better */
    @apply transition-all duration-200;
    @apply focus:bg-slate-900 focus:border-emerald-500/50 focus:ring-4 focus:ring-emerald-500/20 focus:outline-none;
    @apply hover:border-slate-600/60;
    min-width: 0; /* Allow flex shrink */
  }

  /* Enhanced Badges & Pills */
  .badge-primary {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg;
    @apply bg-emerald-600/20 border border-emerald-500/30 text-emerald-300;
    @apply text-xs font-medium tabular-nums;
    @apply shadow-sm;
  }

  .badge-secondary {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg;
    @apply bg-slate-700/40 border border-slate-600/30 text-slate-300;
    @apply text-xs font-medium;
    @apply shadow-sm;
  }

  .badge-info {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg;
    @apply bg-blue-600/20 border border-blue-500/30 text-blue-300;
    @apply text-xs font-medium;
    @apply shadow-sm;
  }

  .badge-muscle {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-xl;
    @apply bg-gradient-to-br from-slate-700/70 to-slate-800/70;
    @apply border border-white/5 shadow-md;
    @apply text-sm font-semibold text-slate-100;
    @apply transition-all duration-200;
    @apply hover:from-slate-700/80 hover:to-slate-800/80;
  }

  /* Number Display System */
  .display-number-lg {
    @apply text-3xl font-bold tabular-nums tracking-tight;
  }

  .display-number-md {
    @apply text-xl font-semibold tabular-nums;
  }

  .display-number-sm {
    @apply text-sm font-medium tabular-nums;
  }

  /* Metric displays (for stats, volume, etc) */
  .metric-value {
    @apply text-2xl font-bold text-emerald-400 tabular-nums;
  }

  .metric-label {
    @apply text-xs font-medium text-slate-400 uppercase tracking-wide;
  }

  /* Card variants for consistency */
  .card-primary {
    @apply bg-slate-900/60 backdrop-blur-sm border border-white/5 rounded-2xl;
    @apply shadow-xl shadow-black/20;
  }

  .card-secondary {
    @apply bg-slate-800/40 backdrop-blur-sm border border-white/[0.03] rounded-xl;
  }

  .card-tertiary {
    @apply bg-slate-800/30 border border-white/[0.02] rounded-lg;
  }

  /* Icon glow effect for muscle icons */
  .icon-glow {
    filter: drop-shadow(0 0 2px rgba(34, 197, 94, 0.3));
  }

  /* Heading system for consistent hierarchy */
  .heading-page {
    @apply text-3xl font-bold text-white mb-6;
    @apply bg-gradient-to-r from-white to-slate-200 bg-clip-text text-transparent;
  }

  .heading-section {
    @apply text-xl font-semibold text-slate-100 mb-4;
  }

  .heading-card {
    @apply text-lg font-semibold text-slate-200 mb-3;
  }

  /* ===== PHASE 2: INTERACTIONS & FEEDBACK ===== */
  
  /* Success celebration animation */
  .success-checkmark {
    animation: successPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }

  .success-glow {
    animation: successGlow 1.2s ease-out forwards;
  }

  /* Button hover enhancements */
  .btn-enhanced {
    @apply transition-all duration-200 ease-out;
    @apply hover:scale-[1.02] hover:shadow-lg;
    @apply active:scale-95;
  }

  .btn-primary-enhanced {
    @apply bg-gradient-to-br from-emerald-500 to-emerald-600;
    @apply hover:from-emerald-400 hover:to-emerald-500;
    @apply shadow-lg shadow-emerald-600/30;
    @apply hover:shadow-xl hover:shadow-emerald-500/40;
    @apply transition-all duration-200;
  }
}

/* Success animation keyframes */
@keyframes successPop {
  0% {
    opacity: 0;
    transform: scale(0) rotate(-45deg);
  }
  50% {
    opacity: 1;
    transform: scale(1.3) rotate(0deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes successGlow {
  0% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    background-color: rgba(34, 197, 94, 0.1);
  }
  50% {
    box-shadow: 0 0 20px 10px rgba(34, 197, 94, 0);
    background-color: rgba(34, 197, 94, 0.2);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
    background-color: rgba(34, 197, 94, 0);
  }
}

/* Enhanced skeleton shimmer (improved from Phase 1) */
.skeleton-enhanced {
  position: relative;
  overflow: hidden;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.03) 0%,
    rgba(255, 255, 255, 0.06) 50%,
    rgba(255, 255, 255, 0.03) 100%
  );
  background-size: 200% 100%;
  animation: shimmerEnhanced 2s ease-in-out infinite;
}

@keyframes shimmerEnhanced {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

