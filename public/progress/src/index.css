@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
  --accent: #22c55e; /* default accent */
  --accent-hover: #16a34a;
  --card-bg: #111826;
  --card-border: rgba(255, 255, 255, 0.05);
  /* Spacing scale (soft 1.25 ratio) */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem;  /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem;    /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem;  /* 24px */
  --space-7: 1.875rem; /* 30px */
  --space-8: 2.25rem; /* 36px */
  --space-9: 2.75rem; /* 44px */
  --space-10: 3.5rem; /* 56px */

  /* Radius tokens */
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* Typography scale (fluid clamp) */
  --font-display-lg: clamp(2.4rem, 4vw + 1.6rem, 3.25rem);
  --font-display: clamp(2rem, 3.2vw + 1.2rem, 2.6rem);
  --font-title: clamp(1.5rem, 1.7vw + 1rem, 1.9rem);
  --font-subtitle: clamp(1.25rem, 1.2vw + 0.9rem, 1.4rem);
  --font-body-lg: clamp(1.05rem, 0.6vw + .85rem, 1.15rem);
  --font-body: clamp(.94rem, 0.45vw + .78rem, 1rem);
  --font-body-sm: clamp(.78rem, 0.35vw + .68rem, .88rem);
  --font-label: clamp(.68rem, 0.3vw + .6rem, .75rem);

  /* Line heights */
  --leading-tight: 1.1;
  --leading-title: 1.15;
  --leading-body: 1.4;
  --leading-small: 1.2;
}

html,
body,
#root {
  height: 100%;
}

input[type="number"] {
  /* iOS brings numeric keypad */
  font-variant-numeric: tabular-nums;
}

/* simple shadcn-like tokens via tailwind */

/* Utility classes for typography tokens */
@layer utilities {
  .text-display-lg { font-size: var(--font-display-lg); line-height: var(--leading-tight); font-weight:600; letter-spacing:-0.02em; }
  .text-display { font-size: var(--font-display); line-height: var(--leading-tight); font-weight:600; letter-spacing:-0.02em; }
  .text-title { font-size: var(--font-title); line-height: var(--leading-title); font-weight:600; letter-spacing:-0.015em; }
  .text-subtitle { font-size: var(--font-subtitle); line-height: var(--leading-title); font-weight:500; letter-spacing:-0.01em; }
  .text-body-lg { font-size: var(--font-body-lg); line-height: var(--leading-body); font-weight:450; }
  .text-body { font-size: var(--font-body); line-height: var(--leading-body); font-weight:450; }
  .text-body-sm { font-size: var(--font-body-sm); line-height: var(--leading-small); font-weight:500; letter-spacing:0; }
  .text-label { font-size: var(--font-label); line-height: var(--leading-small); font-weight:600; letter-spacing:0.02em; text-transform:uppercase; }
  .leading-tight { line-height: var(--leading-tight); }
}

/* Stack utility (vertical rhythm) */
@layer utilities {
  .stack-2 > * + * { margin-top: var(--space-2); }
  .stack-3 > * + * { margin-top: var(--space-3); }
  .stack-4 > * + * { margin-top: var(--space-4); }
  .stack-5 > * + * { margin-top: var(--space-5); }
  .stack-6 > * + * { margin-top: var(--space-6); }
  .glow-card { position:relative; border-radius:1rem; background:rgba(15,23,42,0.7); border:1px solid rgba(255,255,255,0.07); backdrop-filter:blur(8px); box-shadow:0 4px 18px -6px rgba(0,185,255,0.15),0 0 0 1px rgba(255,255,255,0.03); transition: box-shadow .4s ease, border-color .4s ease, background .4s ease; }
  .glow-card::before, .glow-card::after { content:""; position:absolute; inset:0; border-radius:inherit; opacity:0; pointer-events:none; transition:opacity .6s ease; }
  .glow-card::before { background:radial-gradient(circle at 28% 22%, rgba(0,185,255,0.22), transparent 60%), radial-gradient(circle at 78% 72%, rgba(77,91,255,0.18), transparent 65%); mix-blend-mode:screen; }
  .glow-card::after { background:linear-gradient(145deg, rgba(0,185,255,0.28), rgba(77,91,255,0.15) 42%, transparent 70%); filter:blur(22px); }
  .glow-card:hover { border-color:rgba(0,185,255,0.38); box-shadow:0 0 0 1px rgba(0,185,255,0.3),0 8px 30px -8px rgba(0,185,255,0.35),0 16px 40px -14px rgba(77,91,255,0.25); }
  .glow-card:hover::before, .glow-card:hover::after { opacity:1; }
  @media (prefers-reduced-motion: reduce){ .glow-card, .glow-card::before, .glow-card::after { transition:none; } }
  /* Accent-adaptive elevated glow card */
  .card-enhanced { position:relative; border-radius:1rem; background:rgba(17,24,39,0.52); backdrop-filter:blur(6px) saturate(125%); border:1px solid rgba(var(--accent-rgb,59 130 246)/0.26); box-shadow:0 0 0 1px rgba(var(--accent-rgb,59 130 246)/0.2), 0 0 14px -6px rgba(var(--accent-rgb,59 130 246)/0.35); transition: border-color .35s ease, box-shadow .5s ease, background .5s ease; }
  /* Edge glow rim (mask creates hollow center) */
  .card-enhanced::before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(145deg, rgba(var(--accent-rgb,59 130 246)/0.6), rgba(var(--accent-rgb,59 130 246)/0.18) 45%, transparent 80%); -webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.65; pointer-events:none; transition:opacity .4s ease; }
  /* Soft outer ambient halo */
  .card-enhanced::after { content:""; position:absolute; inset:-2px; border-radius:inherit; background:radial-gradient(circle at 50% 60%, rgba(var(--accent-rgb,59 130 246)/0.25), transparent 70%); filter:blur(18px); opacity:.35; pointer-events:none; transition:opacity .5s ease; }
  /* Hover: modest bump (slightly less than previous) */
  .card-enhanced:hover { border-color:rgba(var(--accent-rgb,59 130 246)/0.38); box-shadow:0 0 0 1px rgba(var(--accent-rgb,59 130 246)/0.28), 0 0 18px -6px rgba(var(--accent-rgb,59 130 246)/0.45); }
  .card-enhanced:hover::before { opacity:.78; }
  .card-enhanced:hover::after { opacity:.42; }
  @media (prefers-reduced-motion: reduce){ .card-enhanced, .card-enhanced::before { transition:none; } }
}

/* Accent overrides */
.bg-brand-600 {
  background-color: var(--accent) !important;
}
.hover\:bg-brand-700:hover {
  background-color: var(--accent-hover) !important;
}

/* Card style variants via data attribute */
[data-card-style="glass"] .bg-card {
  background-color: color-mix(
    in srgb,
    var(--card-bg) 85%,
    transparent
  ) !important;
  backdrop-filter: blur(6px);
}
[data-card-style="solid"] .bg-card {
  background-color: var(--card-bg) !important;
}
[data-card-style="minimal"] .bg-card {
  background-color: transparent !important;
  border: 1px solid var(--card-border);
  box-shadow: none !important;
}

/* Rest timer enhancements */
.rest-btn-running {
  position: relative;
  box-shadow: 0 0 0 0 rgba(34,197,94,0.5);
  animation: restPulse 2s ease-in-out infinite;
}
.rest-btn-running::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 9999px;
  background: radial-gradient(circle at 30% 30%, rgba(34,197,94,0.35), transparent 70%);
  pointer-events: none;
  filter: blur(4px);
  opacity: 0.8;
}
@keyframes restPulse {
  0% { box-shadow: 0 0 0 0 rgba(34,197,94,0.55); }
  70% { box-shadow: 0 0 0 14px rgba(34,197,94,0); }
  100% { box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}
.rest-timer-chip.running {
  --ring: 120 100% 65%;
  box-shadow: 0 0 0 1px rgba(34,197,94,0.4), 0 0 8px 2px rgba(34,197,94,0.35), inset 0 0 4px 1px rgba(34,197,94,0.25);
  animation: timerGlow 1.8s linear infinite;
}
.rest-timer-chip.finished {
  animation: timerFinish 0.9s ease-in-out forwards;
}
@keyframes timerGlow {
  0%,100% { filter: brightness(1); }
  50% { filter: brightness(1.25); }
}
@keyframes timerFinish {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0.6); }
  60% { transform: scale(1.06); box-shadow: 0 0 0 12px rgba(34,197,94,0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}

/* New minimalist timer styling */
.rest-timer {
  position: relative;
  line-height: 1.1;
}
@keyframes timerPulse {
  0%,100% { text-shadow: 0 0 4px rgba(34,197,94,0.4), 0 0 10px rgba(34,197,94,0.15); }
  50% { text-shadow: 0 0 6px rgba(34,197,94,0.75), 0 0 18px rgba(34,197,94,0.35); }
}
@keyframes timerFinishPop {
  0% { transform: scale(1); filter: brightness(1); }
  40% { transform: scale(1.08); filter: brightness(1.35); }
  100% { transform: scale(1); filter: brightness(1); }
}

@keyframes timerPulseFast {
  0%,100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.06); }
}

/* Strong alert when rest target reached */
.rest-strong-alert .rest-timer-value { animation: restStrongPulse 1.1s ease-in-out 2; }
@keyframes restStrongPulse {
  0% { transform: scale(1); filter: brightness(1); text-shadow: 0 0 0 rgba(255,255,255,0); }
  25% { transform: scale(1.25); filter: brightness(1.6); text-shadow: 0 0 14px rgba(255,255,255,0.85),0 0 28px rgba(244,63,94,0.65); }
  55% { transform: scale(1.15); filter: brightness(1.3); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Optional page flash */
.rest-screen-flash::before {
  content:""; position:fixed; inset:0; background:radial-gradient(circle at 50% 50%, rgba(255,255,255,0.9), rgba(255,255,255,0) 70%);
  animation: restFlash 480ms ease-out forwards; pointer-events:none; mix-blend-mode:overlay; z-index:9999;
}
@keyframes restFlash { 0% { opacity:0; } 10% { opacity:1; } 100% { opacity:0; } }

/* Stamp button press feedback */
.animate-stamp {
  animation: stampPress 0.36s cubic-bezier(.34,1.56,.64,1);
}
@keyframes stampPress {
  0% { transform: translateY(0) scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0.0); }
  35% { transform: translateY(1px) scale(0.94); box-shadow: 0 0 0 0 rgba(34,197,94,0.0); }
  60% { transform: translateY(-2px) scale(1.08); box-shadow: 0 0 0 6px rgba(34,197,94,0.25); }
  100% { transform: translateY(0) scale(1); box-shadow: 0 0 0 0 rgba(34,197,94,0); }
}

/* Compact tool buttons (mobile tools panel) */
.tool-btn {
  padding: 0.5rem 0.5rem;
  border-radius: 0.75rem;
  background: rgba(51,65,85,0.8); /* slate-700/80 */
  border: 1px solid rgba(255,255,255,0.05);
  text-align: center;
  font-size: 11px;
  font-weight: 500;
  letter-spacing: -0.01em;
  line-height: 1.1;
  transition: background .18s ease, transform .18s ease;
  backdrop-filter: blur(4px);
}
.tool-btn:hover { background: rgba(71,85,105,0.8); }
.tool-btn:active { transform: scale(.96); }
.tool-btn.col-span-2 { background: rgba(51,65,85,0.6); }
.tool-btn:hover { text-shadow: 0 0 4px rgba(255,255,255,0.15); }
